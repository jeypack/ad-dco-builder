<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>McDelivery CH DCO 2022-2023 UTILS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="../../bower_components/juiced/dist/css/juiced.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 12px;
      color: #22522f;
    }

    #bg-exit {
      width: 100%;
      height: 100%;
    }

    div.wrapper-banner div.alpha,
    div.wrapper-banner img.alpha,
    span.alpha {
      opacity: 0;
    }

    #copy {
      position: relative;
    }

    #copy h4 {
      margin: 12px 0 4px 4px;
      color: #264f36;
    }

    #copy h4 small {
      color: #666;
    }

    #copy h4 small span {
      color: #e48d01;
    }

    #copy p,
    #copy p.header {
      border: 1px solid #999;
      border-radius: 3px;
      background-color: #f5f5f5;
      color: #333;
      font-size: 15px;
      line-height: 1.25;
      word-break: break-word;
      padding: 8px;
      margin: 0;
    }

    #copy p.header {
      background-color: transparent;
      color: #666;
      font-size: 15px;
      line-height: 1.25;
      padding: 8px;
      margin: 0;
    }

    #copy p.small {
      font-size: 13px;
      padding: 2px 4px;
    }

    #copy .label,
    #copy .target {
      font-size: 11px;
      padding: 4px 0px 4px 12px;
      background-color: #e48d01;
      color: #fff;
      border-radius: 5px 5px 0px 0px;
    }

    #copy .target {
      background-color: #264f36;
      border-radius: 0px;
    }

    hr {
      margin: 24px 0 12px 0;
    }

    div.container {
      display: flex;
      flex-wrap: wrap;
      box-sizing: border-box;
    }

    div.col-12 {
      flex: 1 0 100%;
      box-sizing: border-box;
      padding: 4px 8px;
      word-break: break-all;
      border: 1px solid grey;
      border-radius: 3px;
      margin-bottom: 8px;
      font-size: 14px;
    }

    div.col-6 {
      flex: 1 0 50%;
      box-sizing: border-box;
      padding: 4px 8px;
      word-break: break-all;
      border: 1px solid grey;
      border-radius: 3px;
      margin-bottom: 8px;
    }
    div.col-auto {
      flex: 1 0 auto;
      box-sizing: border-box;
      padding: 4px 8px;
      word-break: break-all;
      /* border: 1px solid grey;
      border-radius: 3px; */
      margin-bottom: 8px;
    }
    .background-color-green {
      background-color: #22522f;
    }
    .color-white {
      color: #fff;
    }
  </style>
</head>

<body>
  <div id="bg-exit" class="wrapper-banner">
    <h2>McDelivery CH DCO 2022-2023 UTILS</h2>
    <div id="content"></div>
  </div>
  <script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.5.1_min.js"></script>
  <!-- geotargetsCHMcDelivery -->
  <script src="./McDelivery_DCO_2023_Cities_adjusted.js"></script>
  <script src="./geotargets-switzerland-2022-12-02.js"></script>
  <script src="./geotargets-switzerland-2023-01-10.js"></script>
  <script src="./geotargets-2022-12-21.js"></script>
  <script>
    // csv to json
    console.log("McDelivery CH DCO 2022-2023 UTILS");
    console.log("geotargetsCHMcDelivery");
    console.log(geotargetsCHMcDelivery);
    //console.log("geotargetsCH");
    //console.log(geotargetsCH);
    //console.log("geoAll");
    //console.log(geoAll);
    //
    function getCanonicalArrays() {
      const canonicals = { de: [], fr: [], it: [] };
      for (let i = 0, l = geotargetsCHMcDelivery.length; i < l; i++) {
        const itemDelivery = geotargetsCHMcDelivery[i];
        const itemDeliveryID = itemDelivery.id;
        const itemDeliveryLang = itemDelivery.countryCode.split("CH-")[1];
        //console.log("id:", itemDeliveryID, "lang:", itemDeliveryLang, itemDelivery.name);
        for (let c = 0, lc = geotargetsCH.length; c < lc; c++) {
          const item = geotargetsCH[c];
          if (itemDeliveryID === item.id) {
            //GOTTCHA
            if (itemDeliveryLang === "DE") {
              canonicals.de.push(item.canonical);
            } else if (itemDeliveryLang === "FR") {
              canonicals.fr.push(item.canonical);
            } else if (itemDeliveryLang === "IT") {
              canonicals.it.push(item.canonical);
            }
          }
        }
      }
      return canonicals;
    }

    function getSwitzerland() {
      const ch = [];
      for (let i = 0, l = geoAll.length; i < l; i++) {
        const item = geoAll[i];
        const countryCode = item["Country Code"];
        if (countryCode === "CH") {
          ch.push(item);
          //console.log(item);
        }
      }
      //console.log("TOTAL:", ch.length);
      //console.log(ch);
      return ch;
    }

    function getCanonicalNames() {
      const canonicals = { de: [], fr: [], it: [] };
      for (let i = 0, l = geotargetsCHMcDelivery.length; i < l; i++) {
        const itemDelivery = geotargetsCHMcDelivery[i];
        const itemDeliveryID = itemDelivery.id;
        const itemDeliveryLang = itemDelivery.countryCode.split("CH-")[1];
        //console.log("id:", itemDeliveryID, "lang:", itemDeliveryLang, itemDelivery.name);
        for (let c = 0, lc = geoCH.length; c < lc; c++) {
          const item = geoCH[c];
          const itemID = item["Criteria ID"];
          if (itemDeliveryID === itemID) {
            //GOTTCHA
            const itemCanonical = item["Canonical Name"];
            if (itemDeliveryLang === "DE") {
              canonicals.de.push(itemCanonical);
            } else if (itemDeliveryLang === "FR") {
              canonicals.fr.push(itemCanonical);
            } else if (itemDeliveryLang === "IT") {
              canonicals.it.push(itemCanonical);
            }
          }
        }
      }
      return canonicals;
    }

    function wrapContainer(content) {
      return '<div class="container">' + content + '</div>';
    }

    const copyElem = document.getElementById("content");

    //const switzerland = getSwitzerland();
    const canonicals = getCanonicalArrays();
    const switzerland = getCanonicalNames();
    console.log("switzerland");
    console.log(switzerland);

    let output = '';
    let temp = '';

    temp += '<div class="col-12">CANONICALS CH DE-FR-IT: <b>' + geoCH.length + '</b></div>';
    temp += '<div class="col-auto"><input class="form-control radius" placeholder="Canonical Name or ID" name="cname" type="text"></div>';
    temp += '<div class="col-auto"grow-1><button type="submit" class="btn color-white radius background-color-green hover-background-color-alt transition-fast cursor-pointer">Find</button></div>';

    output = wrapContainer(temp);

    //komplette schweizer liste
    //console.log("geoCH:");
    //console.log(geoCH);

    temp = '';
    temp += '<div class="col-12">CANONICAL DE: <b>' + switzerland.de.length + '</b></div>';
    temp += '<div class="col-12">' + switzerland.de.join("|") + '</div>';
    temp += '<div class="col-12">CANONICAL FR: <b>' + switzerland.fr.length + '</b></div>';
    temp += '<div class="col-12">' + switzerland.fr.join("|") + '</div>';
    temp += '<div class="col-12">CANONICAL IT: <b>' + switzerland.it.length + '</b></div>';
    temp += '<div class="col-12">' + switzerland.it.join("|") + '</div>';
    temp = wrapContainer(temp);
    output += temp;

    temp = '<div class="col-12 background-color-green"></div>';
    temp = wrapContainer(temp);
    output += temp;

    temp = '';
    temp += '<div class="col-12">OLD CANONICAL DE: <b>' + canonicals.de.length + '</b></div>';
    temp += '<div class="col-12">' + canonicals.de.join("|") + '</div>';
    temp += '<div class="col-12">OLD CANONICAL FR: <b>' + canonicals.fr.length + '</b></div>';
    temp += '<div class="col-12">' + canonicals.fr.join("|") + '</div>';
    temp += '<div class="col-12">OLD CANONICAL IT: <b>' + canonicals.it.length + '</b></div>';
    temp += '<div class="col-12">' + canonicals.it.join("|") + '</div>';
    temp = wrapContainer(temp);
    output += temp;
    //PRINT
    copyElem.innerHTML = output;
  </script>
</body>

</html>