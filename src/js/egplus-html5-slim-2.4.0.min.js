//@license  Light DOM + ClickThrough - Utils - Version : 2.4.0 - Author : Joerg Pfeifer - @egplusww.com
!function(){"use strict";function t(t){t&&this.add(t)}function e(t,e){if(t&&t.length>0){var n=t[0].getAttribute("egp-target"),i=Boolean(Number(t[0].getAttribute("egp-autopause"))),o=t[0].getAttribute("egp-autoplay"),a=l(n),p="openBtnClick"===e&&s.settings.modalOpenerOnOver?"mouseenter":"click";a.length>0&&"openBtnClick"===e&&gsap.set(a,{css:{display:"none"}}),"closeBtnClick"===e&&gsap.set(t,{css:{display:"none"}}),t[0].addEventListener(p,function(n){var l="modalClick"===e&&("close-btn"===n.target.getAttribute("egp-module")||"EGP-CLOSE-BTN"===n.target.tagName.toUpperCase());if(a.length>0&&"openBtnClick"===e&&(gsap.set('[egp-module="close-btn"], egp-close-btn',{css:{display:"block"}}),gsap.set(t,{css:{display:"none"}}),gsap.set(a,{css:{display:"block"}}),gsap.fromTo(a,{duration:.21,opacity:0},{opacity:1}),r.$target=t,i&&s.tl&&!s.tl.paused()&&s.tl.pause()),"closeBtnClick"===e&&(gsap.set('[egp-module="close-btn"], egp-close-btn',{css:{display:"none"}}),a.length>0?(gsap.set(a,{css:{display:"none"}}),o&&s.tl&&s.tl.paused&&s.tl.play()):(gsap.set(t[0].parentNode,{css:{display:"none"}}),s.tl&&s.tl.paused&&s.tl.play()),r.$target&&r.$target.length&&(gsap.set(r.$target,{css:{display:"block"}}),r.$target=null)),r.has(e)&&r.dispatchEvent({type:e,target:n.target,origEvent:n}),s.has(e)&&s.dispatchEvent({type:e,target:n.target,origEvent:n}),!l)return n.stopPropagation(),!1},!0)}}function n(){(c=l("#bg-exit"))&&c.length>0&&(u=!0,e(l('[egp-module="close-btn"], egp-close-btn'),"closeBtnClick"),e(l('[egp-module="open-btn"], egp-open-btn'),"openBtnClick"),e(l('[egp-module="modal"], egp-modal'),"modalClick"),c[0].addEventListener("click",function(t){var e=r.has("clickThrough");e?r.dispatchEvent({type:"clickThrough",origEvent:t}):g&&window.open(p.clicktag||"https://www.example.com/","_blank"),(e||g)&&(s.clicked=!0)},!1))}function i(){d=!0,u||n(),r.dispatchEvent({type:"init"})}function o(){document.removeEventListener("DOMContentLoaded",o,!1),n()}var a,r,s,l,p,c,u=!1,d=!1,g=!1;(a=t.prototype=[]).add=function(e){var n,i,o,a;if("string"==typeof e)for(n=0,i=(o=document.querySelectorAll(e)).length;n<i;n++)this.push(o.item(n));else if(e instanceof t||"number"==typeof e.length)for(n=0,i=e.length;n<i;n++)(a=e[n])instanceof Element&&this.push(a);else e instanceof Element&&this.push(e);return this},a.eq=function(e){var n=new t;return n.push(this[e]),n},a.find=function(e){var n,i,o,a,r=new t;for(n=0,i=this.length;n<i;n++)for(a=this[n].querySelectorAll(e),o=0;o<a.length;o++)r.push(a.item(o));return r},a.trimSvgUrls=function(){for(var t,e,n,i,o=this.length;--o>=0;){t=this[o];try{e=t.getAttribute("mask"),n="mask"}catch(i){try{e=t.getAttribute("fill"),n="fill"}catch(t){}}e&&-1!==e.indexOf("url")&&(i="#"+e.split("(")[1].split(")")[0].split("#")[1],t.setAttribute(n,"url("+window.location.href+i+")"))}return this},window.EGPlus=r={},s={init:null,images:[],clicked:!1,loaded:!1,currentRepeat:0,settings:{modalOpenerOnOver:!1},isInitialized:function(){return g}},r.ad=s,r.data={},r.initEventDispatcher=function(t){var e={},n=function(t,n,i,o,a){var r={method:n||t,parameters:i,once:"boolean"==typeof o&&o,stopPropagation:!1};e.hasOwnProperty(t)?(a.off(t,n),e[t].push(r)):e[t]=[r]};return Object.defineProperty(t,"dispatchEvent",{value:function(t){var n,i,o,a,r="string"==typeof t?t:t.type;if(e.hasOwnProperty(r))for(a=(n=e[r]).length;--a>-1;){if(o=n[a],"string"==typeof(i=o.method)&&(i=this[i]),i.apply(this,o.parameters||[t]),o.stopPropagation){o.stopPropagation=!1;break}if(o.once&&"boolean"==typeof o.once&&(n.splice(a,1),0===n.length))return e[r]=null,this}return this}}),Object.defineProperty(t,"has",{value:function(t){return e.hasOwnProperty(t)&&e[t]&&e[t].length>0}}),Object.defineProperty(t,"on",{value:function(t,e,i,o){return n(t,e,i,"boolean"==typeof o&&o,this),this}}),Object.defineProperty(t,"one",{value:function(t,e,i){return n(t,e,i,!0,this),this}}),Object.defineProperty(t,"off",{value:function(t,n){if(e.hasOwnProperty(t))if(e[t].length&&n&&"function"==typeof n){var i,o=e[t],a=o.length;for(i=0;i<a;i++)if(o[i].method===n)return o.splice(i,1),this}else e[t].splice(0);return this}}),Object.defineProperty(t,"stopPropagation",{value:function(t){var n,i,o="string"==typeof t?t:t.type;if(e.hasOwnProperty(o))for(i=(n=e[o]).length;--i>-1;)n[i].stopPropagation=!0;return this}}),t},r.initEventDispatcher(r),r.initEventDispatcher(s),l=r.$=r.LD=function(e){return new t(e)},s.setDynamicImages=function(){var t,e,n,i,o,a,r,p=s.images,c=p.length;for(n=0;n<c;n++)""!==(e=p[n]).id&&(t=l(e.id),i=e.x||0,o=e.y||0,a=e.bs||"auto",r=e.repeat||"no-repeat",t[0].style.background="url("+e.url+") "+i+" "+o+"/"+a+" "+r+" transparent")},s.loadImages=function(t,e){var n,i,o,a=0,r=t.length,l=function(){++a===r&&(e?e():s.loaded=!0)},p=function(t){s.has("imageError")&&s.dispatchEvent({type:"imageError",event:t}),l()};for(s.loaded=!1,n=0;n<r;n++)(o=t[n])&&o.url&&((i=new Image).addEventListener("load",l),i.addEventListener("error",p),i.src=o.url,s.images.push(o));return s},s.politeLoad=function(t){s.loadImages(t,function(){s.setDynamicImages(),s.loaded=!0,s.start()})},s.initTimeline=function(){s.tl=new gsap.timeline({defaults:{ease:"power1",duration:.5},paused:!0,onStart:function(){s.maxRepeat=Math.floor(s.tl.totalDuration()/s.tl.duration())-1,s.has("started")&&s.dispatchEvent({type:"started",time:s.tl.totalTime()/s.tl.timeScale()})},onRepeat:function(){s.currentRepeat++,s.has("repeat")&&s.dispatchEvent({type:"repeat",time:s.tl.totalTime()/s.tl.timeScale()})},onComplete:function(){s.has("completed")&&s.dispatchEvent({type:"completed",time:s.tl.totalTime()/s.tl.timeScale()})}}),s.tl.timeScale(1)},s.start=function(){s.loaded=!0,s.initAnimation&&s.initAnimation(),s.initTimeline(),s.setTimelines(),s.visibilityHandler||s.tl.play(),s.has("start")&&s.dispatchEvent({type:"start"}),"string"==typeof p.egpfallback&&"1"===p.egpfallback&&s.tl.seek(s.tl.totalDuration())},s.init=function(){},r.extend=function(t,e,n){var i,o,a,r,s=arguments.length,l=arguments[s-1],p="number"!=typeof l?0:l>2?2:l<0?0:l,c=p>0?s-1:s;for(o=1;o<c;o++){a=arguments[o];for(i in a)if(Object.prototype.hasOwnProperty.call(a,i))switch(r=a[i],typeof r,p){case 1:void 0!==t[i]&&(t[i]=r);break;case 2:void 0!==r&&(t[i]=r);break;default:t[i]=r}}return t},r.nsElems="svg g polygon rect polyline pattern defs circle ellipse line path",r.createElem=function(t,e,n,i){var o,a,s,l=-1!==r.nsElems.indexOf(e)?"http://www.w3.org/2000/svg":"",p=""!==l?document.createElementNS(l,e):document.createElement(e);for(s in n)n.hasOwnProperty(s)&&p.setAttribute("className"===s?"class":s,n[s]);for(s in i)i.hasOwnProperty(s)&&(p.style[s]=i[s]);if(t.length)for(a=t.length,o=0;o<a;o++)t[o].appendChild(p);else t.appendChild(p);return p},r.initAd=function(t){t&&r.extend(s.settings,t),s.size={width:gsap.getProperty(c[0],"width"),height:gsap.getProperty(c[0],"height")},s.init(),g=!0},r.isInitialized=function(){return d},p=r.uriParams=function(){var t,e,n,i={},o=window.location.search.substring(1).split("&");if(o.length<=0)return i;for(t=0;t<o.length;t+=1)e=o[t].split("="),n=decodeURIComponent(e[1]),e[0]=e[0].toLowerCase(),""!==n&&""!==e[0]&&(i[e[0]]=n);return i}(),"interactive"===document.readyState||"complete"===document.readyState?n():document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener?window.addEventListener("load",i):window.onload=i}();
