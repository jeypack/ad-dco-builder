<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>McDelivery CH DCO 2021 UTILS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- STYLES -->
      <style>
        body{font-family: Arial, sans-serif;margin: 12px;color: #22522f;}
        #bg-exit{width:100%;height:100%;}
        div.wrapper-banner div.alpha,div.wrapper-banner img.alpha,span.alpha{ opacity: 0; }
        #copy {
          position: relative;
        }
        #copy h4 {
          margin: 12px 0 4px 4px;
        }
        #copy h4 small {
          color: #666;
        }
        #copy p {
          border: 1px solid #999;
          border-radius: 3px;
          background-color: #f5f5f5;
          color: #333;
          font-size: 16px;
          line-height: 1.25;
          word-break: break-word;
          padding: 8px;
          margin: 0;
        }
        #copy p.small {
          font-size: 13px;
          padding: 2px 4px;
        }
        hr {
          margin: 24px 0 12px 0;
        }
        div.container {
          display:flex;
          justify-content: space-around;
          box-sizing: border-box;
        }
        div.col-6 {
          flex: 1 0 50%;
          box-sizing: border-box;
          padding: 4px 8px;
        }
      </style>
  </head>
  <body>
    <div id="bg-exit" class="wrapper-banner">
      <h2>McDelivery CH DCO 2021 UTILS</h2>
      <div id="copy"></div>
    </div>
    <script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.5.1_min.js"></script>
    <script src="./geotargets-CH-2021-07-27.js"></script>
    <script src="./restaurants.js"></script>
    <script>
      // csv to json
      console.log("McDelivery CH DCO 2021 UTILS");
      console.log("csv to json", "data:");
      console.log(data);
      //+++ CH-DE ++++
      //Basel, Bern, St. Gallen, Winterthur, Zürich
      //Allschwil, Baar, Dietikon, Emmenbrücke, Glattzentrum, Köniz, Kriens, Luzern, Münchenstein, Pratteln, Rümlang, Schlieren
      //Bern, St. Gallen, Volketswil
      //Root, Ebikon, Heimberg, Regensdorf, Therwil, Thun
      //Uster
      //Allschwil, Baar, Basel, Bern, Root, Dietlikon, Ebikon, Emmenbrücke, Glattzentrum, Heimberg, Köniz, Kriens, Luzern, Münchenstein, Pratteln, Regensdorf, Rümlang, Schlieren, St-Gallen, Therwil, Thun, Uster, Volketswil, Winterthur, Zürich
      //+++ CH-FR ++++
      //Geneve, Lausanne, Le Lignon, Meyrin
      //Cheseaux, Collonge-Bellerive, Conthey, Crissier, Fribourg, Genève, Granges-Paccot, Marin, Montreux, Morges, Neuchâtel, Nyon, Renens, Sion, Vevey
      //Bulle, La Chaux-de-Fonds, La Tour-de-Treme, Martigny, Yverdon
      //Bulle, Cheseaux, Collonge-Bellerive, Conthey, Crissier, Fribourg, Genève, Granges-Paccot, La Chaux-de-Fonds, La Tour-de-Treme, Lausanne, Le Lignon, Marin, Martigny, Meyrin, Montreux, Morges, Neuchâtel, Nyon, Renens, Sion, Vevey, Yverdon
      //+++ CH-IT ++++
      //Bellinzona, Locarno, Lugano, Magliaso, Mendrisio, Morbio, Sant Antonino
      //
      //We just have the following restaurants that also have Divoora in DE CH:
      /*
      #Canton, City#
      Schaffhausen, Schaffhausen
      Aarau, Kaiseraugust
      Aarau, Oftringen
      St.Gallo, Wil
      Aarau, Suhr
      Zurich, Wädenswil
      Zurich, Hinwil
      Aarau, Aarau
      Solothurn, Solothurn
      Solothurn, Zuchwil
      Zurich, Uster
      For these regions, could you please also add Divoora in the 3PO logos ?
      ZH Badenerstrasse, ZH Bahnhofplatz, ZH Enge, ZH Langstrasse, ZH Letzipark, ZH Löwenstrasse, ZH Stadelhofen, ZH Oerlikon, BS Stücki, BS Badischer Bahnhof, BS Barfüsserplatz, BS Greifengasse, BS Marktplatz, BS Centralbahnstr. 9, BE Hauptbahnhof, BE Postparc, BE Wankdorf, BE Zytglogge, WT Grüzefeld, WT Zürcherstrasse, WT Untertor, SG Markt am Bohl, SG St.Leonhardstrasse, Allschwil, Köniz
      */
      //
      // UEAT: Regensdorf, Thun, Heimberg, Therwil, Biel, Ebikon, Root
      // JEAT:
      // SMOOD: St. Gallen, Spreitenbach
      // DIVOO: Uster, Chur, Wil, Schaffhausen, Egerkingen, Olten, Aarau, Suhr, Hinwil, Oftringen, Solothurn, Wadenswil, Zuchwil, Fullinsdorf, Kaiseraugst
      // UE SMOOD: Emmen, Kriens, LU Hertenstein, LU Pilatus, Rümlang, Schlieren, Dietlikon, Glattzentrum
      // UE DIVOORA:
      // DIVOORA SMOOD:
      // UE JustEat SMOOD:
      // UE DIVOORA SMOOD:
      var copyElem = document.getElementById('copy'),
        //+++ CH-DE ++++
        targetsDE_TEST = 'Luzern',
        targetsDE_1 = 'Basel, Bern, St. Gallen, Winterthur, Zürich',
        targetsDE_2 = 'Allschwil, Baar, Dietikon, Emmenbrücke, Glattzentrum, Köniz, Kriens, Luzern, Münchenstein, Pratteln, Rümlang, Schlieren',
        targetsDE_3 = 'Bern, St. Gallen, Volketswil',
        targetsDE_4 = 'Root, Ebikon, Heimberg, Regensdorf, Therwil, Thun',
        targetsDE_5 = 'Uster',
        targetsDE_6 = 'Allschwil, Baar, Basel, Bern, Root, Dietlikon, Ebikon, Emmenbrücke, Glattzentrum, Heimberg, Köniz, Kriens, Luzern, Münchenstein, Pratteln, Regensdorf, Rümlang, Schlieren, St-Gallen, Therwil, Thun, Uster, Volketswil, Winterthur, Zürich',
        targetsFR_1 = 'Geneve, Lausanne, Le Lignon, Meyrin',
        //+++ CH-FR ++++
        targetsFR_2 = 'Cheseaux, Collonge-Bellerive, Conthey, Crissier, Fribourg, Genève, Granges-Paccot, Marin, Montreux, Morges, Neuchâtel, Nyon, Renens, Sion, Vevey',
        targetsFR_3 = 'Bulle, La Chaux-de-Fonds, La Tour-de-Treme, Martigny, Yverdon',
        targetsFR_4 = 'Bulle, Cheseaux, Collonge-Bellerive, Conthey, Crissier, Fribourg, Genève, Granges-Paccot, La Chaux-de-Fonds, La Tour-de-Treme, Lausanne, Le Lignon, Marin, Martigny, Meyrin, Montreux, Morges, Neuchâtel, Nyon, Renens, Sion, Vevey, Yverdon',
        //+++ CH-IT ++++
        targetsIT = 'Bellinzona, Locarno, Lugano, Magliaso, Mendrisio, Morbio, Sant Antonino',
        //
        getCanonical = function (target) {
          var i, d, value,
            length = data.length,
            json = [],
            msg = '',
            targetsArr = Array.isArray(target) ? target : target.split(', '),
            l = targetsArr.length;
            console.log("##########", "getCanonical", "targetsArr:", targetsArr);
            for (i = 0; i < length; i++) {
              value = data[i];
              if (value.country === 'CH') {
                for (d = 0; d < l; d++) {
                  if (value.name.indexOf(targetsArr[d]) !== -1) {
                    json.push({
                      name: value.name,
                      canonical: value.canonical,
                      //type: value.type,
                      country: value.country
                    });
                    return json;
                  }
                }
              }
            }
            //console.log("##########", "getCanonical", "json:", json);
            return json;
        },
        print = function (name, target) {
          var i, d, value,
            length = data.length,
            json = [],
            msg = '',
            targetsArr = target.split(', '),
            l = targetsArr.length;
          //id ,2021-05-11T00:00+00:00
          for (i = 0; i < length; i++) {
            value = data[i];
            //msg += (i + 10000) + ',\n';
            //msg += '2021-05-11T00:00+00:00,"' + data[i].canonical + '",\n';
            //get all CH
            if (value.country === 'CH') {
              for (d = 0; d < l; d++) {
                if (value.name.indexOf(targetsArr[d]) !== -1) {
                  json.push({
                    name: value.name,
                    canonical: value.canonical,
                    //type: value.type,
                    country: value.country
                  });
                }
              }
            }
          }
          length = json.length;
          for (i = 0; i < length; i++) {
            msg += json[i].canonical + (i === length - 1 ? '' : '|');
          }
          /*console.log("");
          console.log("#");
          console.log("NAME:", name, "- TARGET:", target);
          //console.log("JSON DATA OUTPUT:", length);
          console.log("+");
          console.log("+ copy start +");
          console.log(msg);
          console.log("+ copy end +");*/
          //
          copyElem.innerHTML = copyElem.innerHTML + '<h4>' + name + ' <small>[ TARGETS COUNT: ' + l + ' ] [ RESULT: ' + length + ' ]</small></h4>' + '<p>' + msg + '</p>';
        },
        printRestaurants = function () {
          var i, d, item, value, canonical,
            l = restaurants.length;
          copyElem.innerHTML = copyElem.innerHTML + '<h4>Restaurants [' + l + ']</h4>';
          for (i = 0; i < l; i++) {
            item = restaurants[i];
            value = getCanonical(item.city);
            canonical = value.length ? '' : '<b>NOT FIND</b>';
            for (d = 0; d < value.length; d++) {
              canonical += value[d].canonical + (d !== value.length - 1 ? '|' : '');
            }
            //console.log("##########", "printRestaurants", "value:", value, "value.canonical:", value.canonical);
            //canonical = value.canonical ? value.canonical.join('|') : 'NOT FIND';
            copyElem.innerHTML = copyElem.innerHTML + '<div class="container"><div class="col-6"><p class="small">' + item.short + ' ' + item.city + ' ' + item.street + '</p></div><div class="col-6"><p class="small"># Canonical: ' + canonical + '</p></div></div>';
          }
        };
      //
      print('DE TEST', targetsDE_TEST);
      print('DE 1', targetsDE_1);
      print('DE 2', targetsDE_2);
      print('DE 3', targetsDE_3);
      print('DE 4', targetsDE_4);
      print('DE 5', targetsDE_5);
      print('DE 6', targetsDE_6);
      copyElem.innerHTML = copyElem.innerHTML + '<hr>';
      print('FR 1', targetsFR_1);
      print('FR 2', targetsFR_2);
      print('FR 3', targetsFR_3);
      print('FR 4', targetsFR_4);
      copyElem.innerHTML = copyElem.innerHTML + '<hr>';
      print('IT', targetsIT);
      copyElem.innerHTML = copyElem.innerHTML + '<hr>';
      printRestaurants();
      //
      //console.log('const data = ' + JSON.stringify(json) + ';');
      /*//name
      for (i = 0; i < l; i++) {
          msg += data[i].name + '\n';
      }
      console.log("");
      console.log("Städtenamen:");
      console.log(msg);
      //canonical
      msg = '';
      for (i = 0; i < l; i++) {
          msg += data[i].canonical + '\n';
      }
      console.log("Canonical:");
      console.log(msg);*/
    </script>
  </body>
</html>
